{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { request } from \"undici\";\nimport { DisTubeError, PlayableExtractorPlugin, type ResolveOptions, Song } from \"distube\";\n\nexport class DirectLinkPlugin extends PlayableExtractorPlugin {\n  override async validate(url: string) {\n    try {\n      const { headers, statusCode } = await request(url, { method: \"HEAD\" });\n      if (statusCode !== 200) return false;\n      const types = headers[\"content-type\"];\n      const type = Array.isArray(types) ? types[0] : types;\n      if ([\"audio/\", \"video/\", \"application/\"].some(s => type?.startsWith(s))) return true;\n    } catch {}\n    return false;\n  }\n\n  resolve<T>(url: string, options: ResolveOptions<T> = {}): Song<T> {\n    const u = new URL(url);\n    return new Song(\n      {\n        id: u.href,\n        name: u.pathname.split(\"/\").pop() || u.href,\n        url,\n        source: \"direct_link\",\n        playFromSource: true,\n        plugin: this,\n      },\n      options,\n    );\n  }\n\n  getStreamURL(song: Song) {\n    if (!song.url) {\n      throw new DisTubeError(\"DIRECT_LINK_PLUGIN_INVALID_SONG\", \"Cannot get stream url from invalid song.\");\n    }\n    return song.url;\n  }\n\n  getRelatedSongs() {\n    return [];\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAwB;AACxB,qBAAiF;AAE1E,IAAM,mBAAN,cAA+B,uCAAwB;AAAA,EAH9D,OAG8D;AAAA;AAAA;AAAA,EAC5D,MAAe,SAAS,KAAa;AACnC,QAAI;AACF,YAAM,EAAE,SAAS,WAAW,IAAI,UAAM,uBAAQ,KAAK,EAAE,QAAQ,OAAO,CAAC;AACrE,UAAI,eAAe,IAAK,QAAO;AAC/B,YAAM,QAAQ,QAAQ,cAAc;AACpC,YAAM,OAAO,MAAM,QAAQ,KAAK,IAAI,MAAM,CAAC,IAAI;AAC/C,UAAI,CAAC,UAAU,UAAU,cAAc,EAAE,KAAK,OAAK,MAAM,WAAW,CAAC,CAAC,EAAG,QAAO;AAAA,IAClF,QAAQ;AAAA,IAAC;AACT,WAAO;AAAA,EACT;AAAA,EAEA,QAAW,KAAa,UAA6B,CAAC,GAAY;AAChE,UAAM,IAAI,IAAI,IAAI,GAAG;AACrB,WAAO,IAAI;AAAA,MACT;AAAA,QACE,IAAI,EAAE;AAAA,QACN,MAAM,EAAE,SAAS,MAAM,GAAG,EAAE,IAAI,KAAK,EAAE;AAAA,QACvC;AAAA,QACA,QAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB,QAAQ;AAAA,MACV;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa,MAAY;AACvB,QAAI,CAAC,KAAK,KAAK;AACb,YAAM,IAAI,4BAAa,mCAAmC,0CAA0C;AAAA,IACtG;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,WAAO,CAAC;AAAA,EACV;AACF;","names":[]}